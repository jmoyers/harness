{
  "name": "harness",
  "version": "0.1.0",
  "private": true,
  "type": "module",
  "packageManager": "bun@1.3.9",
  "bin": {
    "harness": "scripts/harness-bin.js"
  },
  "scripts": {
    "migrate:bun": "bash ./scripts/migrate-to-bun.sh",
    "harness": "bun scripts/harness.ts",
    "harness:core": "bun scripts/harness-core.ts",
    "build:ptyd": "export PATH=\"$HOME/.cargo/bin:$PATH\" && cargo build --manifest-path native/ptyd/Cargo.toml --release && mkdir -p bin && cp native/ptyd/target/release/ptyd bin/ptyd",
    "codex:live": "bun scripts/codex-live.ts",
    "codex:pty:vte:passthrough": "bun scripts/codex-pty-vte-passthrough.ts",
    "codex:live:mux": "bun scripts/harness-core.ts",
    "codex:live:mux:record": "bun scripts/harness-core.ts --record-output .harness/mux-recording.gif",
    "codex:live:mux:record:jsonl": "bun scripts/harness-core.ts --record-path .harness/mux-recording.jsonl",
    "codex:live:mux:client": "bun scripts/harness-core.ts --harness-server-host 127.0.0.1 --harness-server-port 7777",
    "codex:live:mux:launch": "bun scripts/codex-live-mux-launch.ts",
    "mux:fixture:daemon": "bun scripts/control-plane-daemon-fixture.ts",
    "mux:fixture:launch": "bun scripts/mux-fixture-launch.ts",
    "terminal:recording:gif": "bun scripts/terminal-recording-to-gif.ts",
    "codex:live:tail": "bun scripts/codex-live-tail.ts",
    "codex:live:snapshot": "bun scripts/codex-live-snapshot.ts",
    "control-plane:daemon": "bun scripts/control-plane-daemon.ts",
    "terminal:parity": "bun scripts/terminal-parity.ts",
    "previm:passthrough": "bun run build:ptyd",
    "vim:passthrough": "bun scripts/vim-passthrough.ts",
    "prebenchmark:latency": "bun run build:ptyd",
    "benchmark:latency": "bun scripts/benchmark-pty-latency.ts",
    "perf:mux:startup": "bun scripts/perf-mux-startup-report.ts",
    "perf:mux:selector": "bun scripts/perf-mux-selector-report.ts",
    "perf:mux:hotpath": "bun scripts/perf-mux-hotpath-harness.ts",
    "perf:mux:launch:startup:loop": "bun scripts/perf-mux-launch-startup-loop.ts",
    "perf:codex:startup:loop": "bun scripts/perf-codex-startup-loop.ts",
    "loc": "bun scripts/loc-report.ts",
    "deadcode": "bun scripts/check-dead-code.ts",
    "coverage:check": "bun scripts/check-coverage.ts --lcov .harness/coverage-bun/lcov.info --config harness.coverage.jsonc",
    "lint": "oxlint --deny-warnings --disable-unicorn-plugin -c .oxlintrc.json src test scripts",
    "format": "oxfmt --config .oxfmtrc.json src test scripts",
    "format:check": "oxfmt --check --config .oxfmtrc.json src test scripts",
    "typecheck": "tsc --noEmit",
    "test": "bun run build:ptyd && bun test",
    "test:integration:codex-status": "bun scripts/integration-codex-status-sequence.ts",
    "test:integration:codex-status:long": "bun scripts/integration-codex-status-sequence.ts --timeout-ms 180000 --prompt \"Write three short poems titled Dawn, Voltage, and Orbit. Before each poem, perform one repository inspection action and include one factual line from that action. Use at least three total tool actions and do not edit any files.\"",
    "test:coverage": "bun run build:ptyd && bun test --coverage --coverage-reporter=lcov --coverage-dir .harness/coverage-bun && bun run coverage:check",
    "verify": "bun run lint && bun run typecheck && bun run deadcode && bun run test:coverage"
  },
  "devDependencies": {
    "@types/node": "^22.17.0",
    "oxfmt": "^0.33.0",
    "oxlint": "^1.48.0",
    "typescript": "^5.9.2"
  },
  "dependencies": {
    "@napi-rs/canvas": "^0.1.92",
    "gifenc": "^1.0.3"
  }
}
